# Домашнее задание к занятию "4.8. Траблшутинг"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.** 

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "4.8. Траблшутинг - Александр Александров"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате Slack.

---

### Задание 1. 

1. Укажите путь к файлам логов веб-сервера `Nginx`. 
2. Где находится конфигурационный файл, в котором можно посмотреть / поменять эти пути?
3. Какой командой можно воспользоваться для просмотра файла журнала в режиме реального времени?
Попробуйте найти сами, либо воспользуйтесь [ссылкой](https://andreyex.ru/operacionnaya-sistema-linux/nastrojka-zhurnala-oshibok-i-dostupa-nginx/).

*Приведите ответ в свободной форме.*

- /var/log/nginx/access.log - регистрация доступа

- /var/log/nginx/error.log -  ошибки nginx

- "main configuration file located in" - /etc/nginx/nginx.conf

- tail -f /var/log/nginx/access.log

---

### Задание 2. 

Познакомьтесь со схемой сети.

![](https://i.imgur.com/RefFHYj.png)

1. `COMP1` не может обменяться данными с `COMP4`. Какую последовательность действий вы выберете для того, чтобы локализовать проблему?
2. Возможно ли, чтобы при выполнении `ping 192.168.1.2` с компьютера `COMP5`, `ping` прошёл, а подключение по HTTP с `COMP5` на `COMP1` не проходило бы? Поясните свой  ответ максимально детально.
3. `COMP5` отправляет `ping` на `COMP1` и `COMP2`, при этом `COMP1` на `ping` отвечает, а `COMP2` - нет. 

Приведите максимальное количество причин. Самую простую, но нередко встречающуюся - «У `COMP2` выдернули кабель питания» - я уже ответил за вас.

4. `COMP1` пингует только адреса из подсети `192.168.1.0/24` (`COMP2` и `192.168.1.1`), больше никакие адреса не пингуются. С чем это может быть связано? 

*Приведите ответ в свободной форме.*

1.
- наличие отключения или повреждения кабеля;
- порт на оборудовании может быть не настроен, заблокирован или отключен;
- некорректный ip-адрес, маршрут, шлюз, блокировка на строне firewall;

2.

- проверю запущен ли "nginx/apach"
- проверка firewall на COMP1
- порт может быть другой, допустим мы стучимся на 80, а сервер слушает 8080 или 8081
- проверка на ограничения доступа с определенных ип .htaccess
- на маршрутизаторе может быть ограничения по входящему трафику 80, 8080, 8081 с ип COMP5 (злой админ, решил пошутить)

3.

- на маршрутизаторе могли настроить чтоб не со всех машин проходил ответ
- firewall на COMP2
- COMP2 не выставлен "маршрут по умолчанию" не знает куда слать ответ

4.

- нету "маршрута по умолчанию"
- запрет от комьютера COMP1 пинги дальше маршрутизатора

---


**

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.


### Задание 3. 

Используя схему из Задания 2, попробуйте ответить на вопросы:
1. `COMP1` и `COMP2` оба пингуют `10.1.1.2`, однако не пингуют `192.168.2.1` и прочие адреса из `192.168.2.0/24`. Как вы думаете, что не так и как это можно исправить?
2. Какими способами мы можем сделать так, чтобы `COMP2` не смог общаться ни с кем кроме своей локальной сети? (Приведите вариант с настройками самого `COMP2` и попробуйте придумать, можно ли что-то сделать на маршрутизаторе `192.168.1.1`)
3. Как вы думаете, что будет происходить при попытке провести `ping` с `COMP5` на `192.168.2.3` ?

*Приведите ответ в свободной форме.*

1.
 На маршрутизаторе 10.1.1.2 не настроен статический NAT. Его включение исправит ситуацию и сеть 192.168.2.0/24 запингуется.

2.

Убрать на COMP2 Gateway, так же можно весь трафик от COMP2 на маршрутизаторе 192.168.1.1 идущий вне сети дропать.

3.

Если один из двух компов - COMP3 или COMP4 - выключен, тогда пинги пройдут к включенному компу. Если оба компьютера будут включены, возникнет конфликт ip-адресов, при котором адрес 192.168.2.3 будет недоступен, соответственно, пинги не смогут пройти.

---

### Задание 4. 

- Сделайте `ping` с одной виртуальной / физической машины на другую.
- Используя [описание утилиты iperf](https://losst.ru/kak-polzovatsya-iperf), загрузите канал между двумя виртуальными машинами на максимум, например, на 60 секунд, в процессе загрузки повторите `ping`.
- Изменились ли цифры в ответе команды `ping`? Почему? Есть ли разница между физическими и виртуальными машинами?

*Приведите скриншоты/ответы команд до и во время высокой загрузки каналов.*
