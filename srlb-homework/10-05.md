# Домашнее задание к занятию "10.5 Балансировка нагрузки. HAProxy/Nginx."

Домашнее задание выполните в Google Docs и отправьте в личном кабинете на проверку ссылку на ваш документ.

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "10.5 Балансировка нагрузки. HAProxy/Nginx - Александр Волянский".

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1.

Что такое балансировка нагрузки и зачем она нужна? 

*Приведите ответ в свободной форме.*

Балансировка нагрузки (БН) — это метод, который гарантирует, что сервер организации не будет перегружен трафиком. Под этим определением понимается эффективное распределение входящего сетевого трафика между группой внутренних серверов, также известной как ферма серверов или пул серверов.
Операция выполняется физическим или виртуальным устройством, определяющим, какой сервер в пуле удовлетворит клиентский запрос наилучшим образом. При этом интенсивный сетевой трафик не перегружает систему. Кроме того, метод обеспечивает аварийное переключение между устройствами. Поэтому если один из серверов выходит из строя, балансировщик немедленно перенаправляет рабочие нагрузки на резервный сервер, тем самым снижая негативное воздействие на конечных пользователей.

![alt tag](https://github.com/avo1yanskiy/slin-homeworks/blob/main/srlb-homework/image/10-05/1.png)

Балансировщик нагрузки (Load Balancer) — сервис, помогающий серверам эффективно перемещать данные, оптимизирующий использование ресурсов доставки приложений и предотвращающий перегрузки. Он управляет потоком информации между локальным или облачным хранилищем и конечным устройством — ПК, ноутбук, планшет или смартфон. Этот сервис проводит непрерывные проверки работоспособности серверов, чтобы убедиться в их работоспособности. При необходимости подсистема балансировки удаляет неисправные серверы из пула. Входящие в состав балансировщика контроллеры доставки приложений (ADC) предлагают множество дополнительных функций — шифрование, аутентификацию и межсетевой экран веб-приложений, создавая тем самым единую точку контроля для защиты, управления и мониторинга веб-сервисов.

К таким дополнительным возможностям относятся:

- функция разгрузки — защищает от распределенных атак типа «отказ в обслуживании» (DDoS);
- функция прогнозной аналитики — определяет узкие места трафика до того, как они возникнут;
- функция запуска новых виртуальных хранилищ данных при превышении лимитов входящего трафика.

[2022 SberCloud](https://sbercloud.ru/ru/warp/balansirovka-nagruzki)
---

### Задание 2.

Чем отличаются между собой алгоритмы балансировки round robin и weighted round robin? В каких случаях каждый из них лучше применять? 

*Приведите ответ в свободной форме.*

- Метод циклического перебора (Round Robin) – используется по умолчанию для балансировки нагрузки. Циклически просматривает список доступных серверов в последовательном порядке. С его помощью можно рассчитать наихудшее время ответа для одного процесса, при известном общем количестве процессов в очереди.

- алгоритм планирования , используемый в сетях для планирования потоков данных, но также используемый для планирования процессов.
Взвешенный циклический перебор является обобщением циклического планирования . Он обслуживает набор очередей или задач. В то время как циклический перебор очередей / задач дает одну возможность обслуживания за цикл, взвешенный круговой перебор предлагает каждому фиксированное количество возможностей, рабочий вес, установленный в конфигурации. Затем это позволяет влиять на долю емкости, получаемую каждой очередью / задачей.

* Очевидная разница между базовым циклическим перебором и взвешенным циклическим перебором заключается в том, как распределяется вес. В то время как циклический перебор требует равного распределения, взвешенные методы балансировки нагрузки позволяют устанавливать значения неравномерно.
Вместо того, чтобы распределять равные объемы трафика между IP-адресами в пуле, взвешенный циклический перебор будет распределять запросы на основе заданных вами значений. Преимущество этого заключается в том, что вы можете распределять свой веб-трафик между серверами в зависимости от их пропускной способности, географического положения или скорости. Например, в конфигурации взвешенной балансировки нагрузки вы можете гарантировать, что определенный ресурс получает только определенный объем трафика. Это помогает предотвратить полную перегрузку сервера, который получает большее количество запросов.

---

### Задание 3.

Установите и запустите haproxy.

*Приведите скриншот systemctl status haproxy, где будет видно, что haproxy запущен*

![alt tag](https://github.com/avo1yanskiy/slin-homeworks/blob/main/srlb-homework/image/10-05/2.png)
---

### Задание 4.

Установите и запустите nginx.

*Приведите скриншот systemctl status nginx, где будет видно, что nginx запущен*

![alt tag](https://github.com/avo1yanskiy/slin-homeworks/blob/main/srlb-homework/image/10-05/3.png)

---

### Задание 5.

Настройте nginx на виртуальной машине таким образом, чтобы при запросе:

`curl http://localhost:8088/ping`

он возвращал в ответе строчку: 

"nginx is configured correctly"

*Приведите скриншот получившейся конфигурации*

---

## Дополнительные задания (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

---

### Задание 6*.

Настройте haproxy таким образом, чтобы при ответе на запрос:

`curl http://localhost:8080/`

он проксировал его в nginx на порту 8088, который был настроен в задании 5 и возвращал от него ответ: 

"nginx is configured correctly". 

*Приведите скриншот получившейся конфигурации*